<!DOCTYPE html>
<html>
<head>
<title>Stormbringer (48k): Routine at 42638</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../spectrum.css" />
<link rel="stylesheet" type="text/css" href="../stormbringer.css" />
<script type="text/javascript" src="../js/require.js"></script>
<script type="text/javascript" src="../js/main.js"></script>
<script type="text/javascript" src="../js/bootstrap.js"></script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="42616.html">42616</a></span></td>
<td class="up">Up: <a href="../maps/all.html#42638">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="42938.html">42938</a></span></td>
</tr>
</table>
<div class="description">42638: Process Command to Examine Yourself / A Character / An Object</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">

</div>
<table class="input-0">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>

</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="42638"></span>42638</td>
<td class="instruction">CALL <a href="63399.html">63399</a></td>
<td class="comment-11" rowspan="1">Print or update Command Summary Window at top of screen</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42641"></span>42641</td>
<td class="instruction">LD DE,52158</td>
<td class="comment-11" rowspan="1">Point DE at "[Current Command] " text...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42644"></span>42644</td>
<td class="instruction">CALL <a href="63349.html">63349</a></td>
<td class="comment-11" rowspan="1">...and print in Command Summary Window at top of screen</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42647"></span>42647</td>
<td class="instruction">LD A,16</td>
<td class="comment-11" rowspan="1">Draw "EXAMINE WHAT?" Menu Window...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42649"></span>42649</td>
<td class="instruction">CALL <a href="47185.html">47185</a></td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42652"></span>42652</td>
<td class="instruction">LD HL,52162</td>
<td class="comment-11" rowspan="1">Point HL at "[Current Command] WHAT ?" menu text...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42655"></span>42655</td>
<td class="instruction">CALL <a href="46902.html">46902</a></td>
<td class="comment-11" rowspan="1">...and print to screen</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42658"></span>42658</td>
<td class="instruction">CALL <a href="47502.html">47502</a></td>
<td class="comment-11" rowspan="1">Process keyboard / joystick input on a menu and load A with selected item index</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42661"></span>42661</td>
<td class="instruction">OR A</td>
<td class="comment-11" rowspan="1">If "OBJECT" selected...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42662"></span>42662</td>
<td class="instruction">JP Z,42834</td>
<td class="comment-11" rowspan="1">...then skip ahead to <a href="42638.html#42834">42834</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42665"></span>42665</td>
<td class="instruction">CP 1</td>
<td class="comment-11" rowspan="1">If "CHARACTER" selected...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42667"></span>42667</td>
<td class="instruction">JP Z,42715</td>
<td class="comment-11" rowspan="1">...then skip ahead to <a href="42638.html#42715">42715</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="42670"></span>
<div class="comments">
<div class="paragraph">
Examine Yourself
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42670"></span>42670</td>
<td class="instruction">LD DE,52521</td>
<td class="comment-11" rowspan="1">Point DE at "YOURSELF " text...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42673"></span>42673</td>
<td class="instruction">CALL <a href="63349.html">63349</a></td>
<td class="comment-11" rowspan="1">...and print in Command Summary Window at top of screen</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42676"></span>42676</td>
<td class="instruction">CALL <a href="64207.html">64207</a></td>
<td class="comment-11" rowspan="1">Display Execute / Reject Command window and return here if Execute chosen, else exit to Main Game Loop</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42679"></span>42679</td>
<td class="instruction">LD A,18</td>
<td class="comment-11" rowspan="1">Draw Window 18...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42681"></span>42681</td>
<td class="instruction">CALL <a href="47193.html">47193</a></td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42684"></span>42684</td>
<td class="instruction">LD A,32</td>
<td class="comment-11" rowspan="1">Set Current Character index to 32...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42686"></span>42686</td>
<td class="instruction">LD (41937),A</td>
<td class="comment-11" rowspan="1">...as index of "MAGIC KNIGHT" text is 32 relative to start of characters' names at <a href="58459.html#58544">58544</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42689"></span>42689</td>
<td class="instruction">LD HL,52311</td>
<td class="comment-11" rowspan="1">Point HL at percentage completion text</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42692"></span>42692</td>
<td class="instruction">LD DE,52323</td>
<td class="comment-11" rowspan="1">Point DE at time left text</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42695"></span>42695</td>
<td class="instruction">CALL <a href="45522.html">45522</a></td>
<td class="comment-11" rowspan="1">Insert current time and score into "Time Left" and "Percentage Completion" texts</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42698"></span>42698</td>
<td class="instruction">LD HL,24768</td>
<td class="comment-11" rowspan="1">Point HL at start of Magic Knight's Current Stats</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42701"></span>42701</td>
<td class="instruction">LD A,37</td>
<td class="comment-11" rowspan="1">Set Graphic Index to 37...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42703"></span>42703</td>
<td class="instruction">LD (42827),A</td>
<td class="comment-11" rowspan="1">...and store as operand to instruction at <a href="42638.html#42826">42826</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42706"></span>42706</td>
<td class="instruction">LD A,(24846)</td>
<td class="comment-11" rowspan="1">Load Magic Knight's Attribute value into...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42709"></span>42709</td>
<td class="instruction">LD (49193),A</td>
<td class="comment-11" rowspan="1">...content attribute slot of Window 19 (EXAMINE Portrait Frame)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42712"></span>42712</td>
<td class="instruction">JP 42763</td>
<td class="comment-11" rowspan="1">Skip ahead to <a href="42638.html#42763">42763</a> (display window as in Examine Character)</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="42715"></span>
<div class="comments">
<div class="paragraph">
Examine Character
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="42715"></span>42715</td>
<td class="instruction">LD HL,51408</td>
<td class="comment-11" rowspan="1">Point HL at "[Current Command] ?" text (end of sub-menu title, after "WHO DO YOU WANT TO ")</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42718"></span>42718</td>
<td class="instruction">LD DE,0</td>
<td class="comment-11" rowspan="1">Load DE with zero (i.e. no Command Summary Text)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42721"></span>42721</td>
<td class="instruction">CALL <a href="45963.html">45963</a></td>
<td class="comment-11" rowspan="1">Display and process input for Character Selection Menu (current room's characters only), setting Current Character</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42724"></span>42724</td>
<td class="instruction">JP Z,<a href="41578.html#41742">41742</a></td>
<td class="comment-11" rowspan="1">If there are no characters in the room then set MK's available action flags and jump to start of Main Game Loop (<a href="41578.html#41742">41742</a>)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42727"></span>42727</td>
<td class="instruction">CALL <a href="64207.html">64207</a></td>
<td class="comment-11" rowspan="1">Display Execute / Reject Command window and return here if Execute chosen, else exit to Main Game Loop</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42730"></span>42730</td>
<td class="instruction">LD A,5</td>
<td class="comment-11" rowspan="1">Increase Current Character's happiness by 5...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42732"></span>42732</td>
<td class="instruction">CALL <a href="45434.html">45434</a></td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42735"></span>42735</td>
<td class="instruction">LD A,18</td>
<td class="comment-11" rowspan="1">Draw Window 18...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42737"></span>42737</td>
<td class="instruction">CALL <a href="47193.html">47193</a></td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42740"></span>42740</td>
<td class="instruction">LD A,(41937)</td>
<td class="comment-11" rowspan="1">Load A with index of Current Character</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42743"></span>42743</td>
<td class="instruction">LD E,0</td>
<td class="comment-11" rowspan="1">Point HL at start of character's stats...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42745"></span>42745</td>
<td class="instruction">CALL <a href="45406.html">45406</a></td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42748"></span>42748</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">Transfer address from HL...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42749"></span>42749</td>
<td class="instruction">POP IX</td>
<td class="comment-11" rowspan="1">...into IX</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42751"></span>42751</td>
<td class="instruction">LD A,(IX+5)</td>
<td class="comment-11" rowspan="1">Load Character Graphic Index into A...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42754"></span>42754</td>
<td class="instruction">LD (42827),A</td>
<td class="comment-11" rowspan="1">...and modify operand of instruction at <a href="42638.html#42826">42826</a> to match</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42757"></span>42757</td>
<td class="instruction">LD A,(IX+4)</td>
<td class="comment-11" rowspan="1">Load character's Attribute value into...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42760"></span>42760</td>
<td class="instruction">LD (49193),A</td>
<td class="comment-11" rowspan="1">...content attribute slot of Window 19 (EXAMINE Portrait Frame)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="42763"></span>42763</td>
<td class="instruction">CALL <a href="42938.html">42938</a></td>
<td class="comment-11" rowspan="1">Insert numeric stats (at HL) of a character into "EXAMINE CHARACTER" window text</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42766"></span>42766</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">Store HL (points to start of character's current stats)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42767"></span>42767</td>
<td class="instruction">LD HL,52180</td>
<td class="comment-11" rowspan="1">Print Examine Character window text (i.e. "EXAMINE [CHARACTER] ... STRENGTH XX..." text)...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42770"></span>42770</td>
<td class="instruction">CALL <a href="46902.html">46902</a></td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42773"></span>42773</td>
<td class="instruction">POP IX</td>
<td class="comment-11" rowspan="1">Restore IX (points to start of character's current stats)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42775"></span>42775</td>
<td class="instruction">LD B,10</td>
<td class="comment-11" rowspan="1">Load B with 10 (index of "[Current Character's short name] IS ASLEEP" text)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42777"></span>42777</td>
<td class="instruction">BIT 7,(IX+6)</td>
<td class="comment-11" rowspan="1">If character's Asleep Flag is set...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42781"></span>42781</td>
<td class="instruction">JR NZ,42786</td>
<td class="comment-11" rowspan="1">...then skip ahead to <a href="42638.html#42786">42786</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42783"></span>42783</td>
<td class="instruction">LD B,(IX+7)</td>
<td class="comment-11" rowspan="1">Load B with index of character's Current Status Text</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="42786"></span>42786</td>
<td class="instruction">LD A,(41937)</td>
<td class="comment-11" rowspan="1">If Current Character index is not 32 (Magic Knight, i.e. EXAMINE YOURSELF)...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42789"></span>42789</td>
<td class="instruction">CP 32</td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42791"></span>42791</td>
<td class="instruction">JR NZ,42795</td>
<td class="comment-11" rowspan="1">...then skip ahead to <a href="42638.html#42795">42795</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42793"></span>42793</td>
<td class="instruction">LD B,1</td>
<td class="comment-11" rowspan="1">Load B with 1 (index of Magic Knight's current status text)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="42795"></span>42795</td>
<td class="instruction">RES 7,B</td>
<td class="comment-11" rowspan="1">Reset Bit 7 of status text index (<a href="../reference/facts.html#redundantinstructions">see trivia</a>)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42797"></span>42797</td>
<td class="instruction">LD HL,52301</td>
<td class="comment-11" rowspan="1">Point HL at start of characters' "current status" texts</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42800"></span>42800</td>
<td class="instruction">CALL <a href="63332.html#63335">63335</a></td>
<td class="comment-11" rowspan="1">Advance HL to B-th entry in list of zero-terminated strings starting at HL...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42803"></span>42803</td>
<td class="instruction">CALL <a href="46902.html">46902</a></td>
<td class="comment-11" rowspan="1">...and print</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42806"></span>42806</td>
<td class="instruction">LD A,(42827)</td>
<td class="comment-11" rowspan="1">If Character Graphic Index is zero...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42809"></span>42809</td>
<td class="instruction">OR A</td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42810"></span>42810</td>
<td class="instruction">JR Z,42831</td>
<td class="comment-11" rowspan="1">...then skip ahead to <a href="42638.html#42831">42831</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42812"></span>42812</td>
<td class="instruction">LD A,19</td>
<td class="comment-11" rowspan="1">Draw Window 19 (EXAMINE Portrait Frame)...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42814"></span>42814</td>
<td class="instruction">CALL <a href="47193.html">47193</a></td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42817"></span>42817</td>
<td class="instruction">LD BC,(23408)</td>
<td class="comment-11" rowspan="1">Load BC with top-left coordinate of current window</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42821"></span>42821</td>
<td class="instruction">LD A,71</td>
<td class="comment-11" rowspan="1">Load ATTR T system variable with 71 (white INK, black PAPER, BRIGHT)...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42823"></span>42823</td>
<td class="instruction">LD (23695),A</td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="42826"></span>
<div class="comments">
<div class="paragraph">
The operand of the instruction at <a href="42638.html#42826">42826</a> represents the Character's Graphic Index. This is modified by the instructions at <a href="42638.html#42703">42703</a> and <a href="42638.html#42754">42754</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42826"></span>42826</td>
<td class="instruction">LD A,0</td>
<td class="comment-11" rowspan="1">Load A with character's Graphic Index...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42828"></span>42828</td>
<td class="instruction">CALL <a href="63504.html">63504</a></td>
<td class="comment-11" rowspan="1">...and draw this graphic at character coordinates (C, B) with width = 2 characters and height = 4 characters</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="42831"></span>42831</td>
<td class="instruction">JP <a href="41578.html#41739">41739</a></td>
<td class="comment-11" rowspan="1">Display "PRESS FIRE TO CONTINUE" Window and wait for input and return to Main Game Loop</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="42834"></span>
<div class="comments">
<div class="paragraph">
Examine Object
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="42834"></span>42834</td>
<td class="instruction">CALL <a href="45641.html">45641</a></td>
<td class="comment-11" rowspan="1">Display "YOU ARE NOT CARRYING ANYTHING" Window and set Zero Flag if Magic Knight's inventory (carrying) is empty</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42837"></span>42837</td>
<td class="instruction">JP Z,<a href="41578.html#41742">41742</a></td>
<td class="comment-11" rowspan="1">If MK's inventory (carrying) is empty then set his available action flags and jump to start of Main Game Loop (<a href="41578.html#41742">41742</a>)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42840"></span>42840</td>
<td class="instruction">LD A,15</td>
<td class="comment-11" rowspan="1">Set bottom edge of Window 20 to 15...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42842"></span>42842</td>
<td class="instruction">LD (49197),A</td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42845"></span>42845</td>
<td class="instruction">LD IX,24848</td>
<td class="comment-11" rowspan="1">Point IX at Magic Knight's current inventory (carrying)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42849"></span>42849</td>
<td class="instruction">LD B,5</td>
<td class="comment-11" rowspan="1">Load B with 5 (five inventory slots)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42851"></span>42851</td>
<td class="instruction">LD HL,51920</td>
<td class="comment-11" rowspan="1">Point HL at "[Current Command] WHICH OBJECT ?" text</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42854"></span>42854</td>
<td class="instruction">LD DE,0</td>
<td class="comment-11" rowspan="1">Load DE with zero (i.e. no Command Summary Text)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42857"></span>42857</td>
<td class="instruction">CALL <a href="45809.html">45809</a></td>
<td class="comment-11" rowspan="1">Show list of objects in Magic Knight's inventory (carrying) as a menu and load A with selected item index</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42860"></span>42860</td>
<td class="instruction">LD HL,24848</td>
<td class="comment-11" rowspan="1">Point HL at start of Characters' Current Inventories Table</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42863"></span>42863</td>
<td class="instruction">CALL <a href="45766.html">45766</a></td>
<td class="comment-11" rowspan="1">Print name of object in inventory slot A of inventory data at HL in Command Summary Window</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42866"></span>42866</td>
<td class="instruction">CALL <a href="64207.html">64207</a></td>
<td class="comment-11" rowspan="1">Display Execute / Reject Command window and return here if Execute chosen, else exit to Main Game Loop</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42869"></span>42869</td>
<td class="instruction">LD A,(41779)</td>
<td class="comment-11" rowspan="1">Load A with index of Current Object...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42872"></span>42872</td>
<td class="instruction">CALL <a href="45685.html">45685</a></td>
<td class="comment-11" rowspan="1">...and if this is 4 (Teddy Bear) then display "THE BEAR SAYS..." message and wait for Fire to be pressed</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42875"></span>42875</td>
<td class="instruction">LD E,0</td>
<td class="comment-11" rowspan="1">Point HL to the start of the Current Object's record in Object Properties Table...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42877"></span>42877</td>
<td class="instruction">CALL <a href="45390.html">45390</a></td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42880"></span>42880</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">Store HL (pointer to Current Object's properties)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42881"></span>42881</td>
<td class="instruction">CALL <a href="43000.html">43000</a></td>
<td class="comment-11" rowspan="1">Insert numeric / text properties of the object into "Examine Object" Window Text</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42884"></span>42884</td>
<td class="instruction">LD A,20</td>
<td class="comment-11" rowspan="1">Draw Window 20 ("EXAMINE OBJECT" Window)...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42886"></span>42886</td>
<td class="instruction">CALL <a href="47193.html">47193</a></td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42889"></span>42889</td>
<td class="instruction">LD HL,52251</td>
<td class="comment-11" rowspan="1">Point HL at "&#160;&#160;&#160;&#160;&#160;&#160;[Current Command]" text</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42892"></span>42892</td>
<td class="instruction">CALL <a href="46902.html">46902</a></td>
<td class="comment-11" rowspan="1">...and print to screen</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42895"></span>42895</td>
<td class="instruction">LD A,(41779)</td>
<td class="comment-11" rowspan="1">Load B with index of Current Object...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42898"></span>42898</td>
<td class="instruction">LD B,A</td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42899"></span>42899</td>
<td class="instruction">CALL <a href="63332.html">63332</a></td>
<td class="comment-11" rowspan="1">...and point HL at its entry in Table of Object Names</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42902"></span>42902</td>
<td class="instruction">CALL <a href="46902.html">46902</a></td>
<td class="comment-11" rowspan="1">Print the Current Object's name</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42905"></span>42905</td>
<td class="instruction">LD HL,52256</td>
<td class="comment-11" rowspan="1">Point HL at Object Properties text...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42908"></span>42908</td>
<td class="instruction">CALL <a href="46902.html">46902</a></td>
<td class="comment-11" rowspan="1">...and print to screen</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42911"></span>42911</td>
<td class="instruction">POP IX</td>
<td class="comment-11" rowspan="1">Restore IX (pointer to Current Object's properties)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42913"></span>42913</td>
<td class="instruction">LD A,(IX+6)</td>
<td class="comment-11" rowspan="1">Set content attribute of Window 21 (frame around object in "EXAMINE OBJECT" Window)...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42916"></span>42916</td>
<td class="instruction">LD (49209),A</td>
<td class="comment-11" rowspan="1">...to match attribute of object</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42919"></span>42919</td>
<td class="instruction">LD A,21</td>
<td class="comment-11" rowspan="1">Draw Window 21...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42921"></span>42921</td>
<td class="instruction">CALL <a href="47193.html">47193</a></td>
<td class="comment-11" rowspan="1">...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42924"></span>42924</td>
<td class="instruction">LD BC,(23408)</td>
<td class="comment-11" rowspan="1">Load BC with top-left coordinate of current window</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42928"></span>42928</td>
<td class="instruction">INC B</td>
<td class="comment-11" rowspan="1">Increase y-coordinate by 1 (as object positions are based upon their bottom-left corner)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42929"></span>42929</td>
<td class="instruction">LD A,(41779)</td>
<td class="comment-11" rowspan="1">Load A with index of Current Object</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42932"></span>42932</td>
<td class="instruction">CALL <a href="48191.html">48191</a></td>
<td class="comment-11" rowspan="1">Set Terrain Interaction Data for character blocks spanned by object and draw the object</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="42935"></span>42935</td>
<td class="instruction">JP <a href="41578.html#41739">41739</a></td>
<td class="comment-11" rowspan="1">Display "PRESS FIRE TO CONTINUE" Window and wait for input and return to Main Game Loop</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="42616.html">42616</a></span></td>
<td class="up">Up: <a href="../maps/all.html#42638">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="42938.html">42938</a></span></td>
</tr>
</table>
<footer>
<div class="release">The Complete Stormbringer (48k) RAM Disassembly 02/06/2018</div>
<div class="copyright">&#169; 1987 David Jones / Mastertronic (Stormbringer). &#169; 2017 Philip M. Anderson (this disassembly). Contact: weyoun47-AT-gmail.com.</div>
<div class="created">Created using <a class="link" href="http://skoolkit.ca/">SkoolKit</a> 6.4.</div>
</footer>
</body>
</html>