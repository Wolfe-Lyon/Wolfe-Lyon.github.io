<!DOCTYPE html>
<html>
<head>
<title>Stormbringer (48k): Data at 23675</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../common.css" />
<link rel="stylesheet" type="text/css" href="../spectrum.css" />
<link rel="stylesheet" type="text/css" href="../stormbringer.css" />
<script type="text/javascript" src="../js/require.js"></script>
<script type="text/javascript" src="../js/main.js"></script>
<script type="text/javascript" src="../js/bootstrap.js"></script>
</head>
<body class="Asm-b">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Data</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="23670.html">23670</a>
</td>
<td class="up">Up: <a href="../maps/all.html#23675">Map</a></td>
<td class="next">
Next: <a href="23676.html">23676</a>
</td>
</tr>
</table>
<div class="description">23675: Interrupt routine flags</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Bitwise flags which determine which things occur upon executing the interrupt routine. The bits are as follows:
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">Bit</th>
<th colspan="1" rowspan="1">Effect</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">0</td>
<td class="" colspan="1" rowspan="1">Game-in-progress flag</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">1</td>
<td class="" colspan="1" rowspan="1">Characters-movement-unrestricted flag / disable-in-game-glow flag</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">2</td>
<td class="" colspan="1" rowspan="1">Characters-can't-move flag</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">3</td>
<td class="" colspan="1" rowspan="1">Unused</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">4</td>
<td class="" colspan="1" rowspan="1">Unused</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">5</td>
<td class="" colspan="1" rowspan="1">Unused</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">6</td>
<td class="" colspan="1" rowspan="1">Unused</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">7</td>
<td class="" colspan="1" rowspan="1">Unused</td>
</tr>
</table>
</div>
<div class="paragraph">
The game-in-progress flag is used to determine whether or not to allow loading and saving of games (which can only be done via Gadget X), and also whether or not to move characters and update the game clock.
</div>
<div class="paragraph">
The characters-movement-unrestricted flag determines whether or not characters can enter or leave Magic Knight's current room. When this flag is set, characters will be prevented from entering Magic Knight's current room (see <a href="62778.html#62801">62801</a>) and will be allowed to leave Magic Knight's current room (see <a href="62622.html#62663">62663</a>). When the player is controlling Magic Knight (i.e. not in a menu or information window), this flag is reset and the characters in Magic Knight's current room will be unable to move at all. When the player is navigating menus / windows the flag is set.
</div>
<div class="paragraph">
The disable-in-game-glow flag is used to control whether or not glowing cells have their attribute updated.
</div>
<div class="paragraph">
Although both the characters-movement-unrestricted flag and the disable-in-game-glow flag are co-incident, there is no conflict between them. Both are reset when room drawing is finalised (<a href="39393.html#39541">39541</a>), preventing characters from moving when in the same room as Magic Knight while enabling in-game glow. Both are set when a window is drawn (<a href="47193.html#47199">47199</a>), allowing characters to move freely while disabling in-game glow.
</div>
<div class="paragraph">
The characters-can't-move flag prevents characters from moving at all.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="23675"></span>23675</td>
<td class="instruction">DEFB 0</td>
<td class="comment-0" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="23670.html">23670</a>
</td>
<td class="up">Up: <a href="../maps/all.html#23675">Map</a></td>
<td class="next">
Next: <a href="23676.html">23676</a>
</td>
</tr>
</table>
<footer>
<div class="release">The Complete Stormbringer (48k) RAM Disassembly 08/05/2021</div>
<div class="copyright">&#169; 1987 David Jones / Mastertronic (Stormbringer). &#169; 2014-2021 Philip M. Anderson (this disassembly). Contact: weyoun47-AT-gmail.com.</div>
<div class="created">Created using <a class="link" href="http://skoolkit.ca/">SkoolKit</a> 8.4.</div>
</footer>
</body>
</html>